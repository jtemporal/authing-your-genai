{
  "$schema": "https://aka.ms/codetour-schema",
  "title": "4 - Setting up Google",
  "nextTour": "5 - Tool Calling: GMail",
  "description": "# Setting up Google Project for Tool Calling\n\nTo allow your application to",
  "steps": [
    {
      "title": "Creating a Google Project",
      "description": "# Setting up a Google project for tool calling\n\nTo allow your application to interact with Google services like Gmail, we need to register it with Google and get API credentials.\n\nFor this you'll need\n* [Google Developer Account](https://console.developers.google.com/)\n* a Google project, \n* The Gmail API enabled\n* A configured OAuth consent screen and credentials.\n\nYou can follow the steps on the [Google Sign-in and Authorization](https://auth0.com/ai/docs/google-sign-in-and-auth) section of the Auth for GenAI Docs.\n\nIn case you prefer to follow them here you can use the expandable section below.\n\n<details>\n\n<summary>Detailed steps</summary>\n\n## Setting up a Google Project\n\nFirst create and setup the Google Project, then enable the Gmail API:\n\n1. Go to [Google Cloud Console](https://console.developers.google.com/) and create a new project or select an existing one.\n![](images/03-1-google-project-creation.png)\n2. Select **APIs & Services, then click enable APIs & Services, select the Gmail API  [Gmail API](https://console.cloud.google.com/apis/library/gmail.googleapis.com) and enable it.\n    * Make sure your project is selected at the top left corner\n\n    ![](images/03-2-gmail-api.png)\n\nThen you need to configure the Application:\n\n1. Go to the [Google Auth Platform](https://console.cloud.google.com/auth/overview) and create the app:\n![](images/03-3-consent-screen-configuration-initial.png)\n    1. Click **Branding** on the left side menu\n    2. Create an App:\n        * **App Name**: dev_day\n        * **User support email**: choose your preferred email.\n        * **Authorized domains**, enter `auth0.com`\n        * **Developer contact information**,type your email\n    3. Select **Audience**\n        * Choose **External**\n        * Under **Test users**, add the email address, you want to use for testing\n        * Test users must be valid Gmail Accounts.\n\n\n4. Finally, on **Data Access** add the GMail scope:\n    * Filter for Gmail and select the scopes:\n        * `.../auth/gmail.readonly` - to read emails\n        * `.../auth/gmail.compose` - to draft and send emails\n        * `.../auth/gmail.modify` - for more advanced operations like marking as read\n\n        ![](images/03-4-scopes-filtered.png)\n    * Scroll to the bottom and click **Update**. \n    * You should see something like this after the update:\n    ![](images/03-5-scopes-selected.png)\n\n5. Click **Save**.\n\nFinally is time to setup the OAuth Client in Google:\n\n1. Start copying your Auth0 Domain:\n    * Go to the Auth0 Dashboard under your [Tentant Settings](https://manage.auth0.com/#/tenant/general)\n    * Copy the tentant name and region \n2. Go to [the Google Auth Platform under the Clients section](https://console.cloud.google.com/auth/clients).\n    * Click the three dots and then \"**+ Create Client**\".\n    \n    ![](images/03-6-oauth-client-creation-option.png)\n    * **Application type**: Select \"*Web application*\".\n\n    ![](images/03-6-app-type.png)\n    * **Name**: Give it a name, e.g., \"*Assistant0 Web Client*\".\n    * Authorized JavaScript origins: \n        * Add your **Auth0 Domain**: https://<YOUR_AUTH0_DOMAIN> (e.g., https://your-tenant.region.auth0.com).\n    * Authorized redirect URIs:\n        * Add your **Auth0 Callback URL**: https://<YOUR_AUTH0_DOMAIN>/login/callback.\n    \n    ![](images/03-8-google-oauth-client-creation.png)\n    * Click **Create**.\n* You'll now see your **Client ID** and **Client Secret**. Copy these and make sure not to lose them or share them. You'll need them to configure the Google social connection in Auth0.\n![](images/03-9-client-creation-client-id-client-secret.png)\n\nWith these steps, your Google Cloud Project is ready, and you have the Client ID and Secret. Next, we'll configure Auth0.\n\n</details>\n\nYou'll need the **Client ID** and **Client Secret** from a Google Application and Oauth Client for the next step.\n\n## Configure Google Social Connection in Auth0\n\nNow, let's tell Auth0 how to use the Google credentials you just created.\n\nBy default Auth0 uses devlopment keys for the google social connection, so now that you have a \"real\" one, is time to update that.\n\n1. Go back to the Auth0 Dashboard.\n2. Navigate to [Authentication > Social](https://manage.auth0.com/#/connections/social).\n3. Click on the **google-oauth2** in the list of social connections.\n4. Add the information you have from the Google OAuth Client:\n    * **Client ID**: Paste the Client ID from your Google Cloud Project.\n    * **Client Secret**: Paste the Client Secret from your Google Cloud Project.\n5. In the **Permissions** section find the block corresponding to Gmail:\n    * Select `Gmail.readonly` and `Gmail.compose`\n6. Scroll down to **Advanced Settings**:\n    * Ensure **Token Vault** is _enabled_ - using Auth0's Token Vault feature to allow your backend to call Google APIs on behalf of the user. This is key for our use case with Auth0 for GenAI.\n7. Scroll all the way down and click **Save Changes**.\n\n---\n\nWith these completed you are ready for [the next step](04-tool-calling-gmail.md).\n"
    }
  ]
}
